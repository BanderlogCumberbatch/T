# План тестирования REST API GET /products/{productId}/cost

# Функциональное тестирование

Позитивные сценарии:

1. Запрос с различными комбинациями параметров

      Проверить различные комбинации параметрова start, count (положительные целые числа)
      
      Ожидаемый результат: HTTP 200, JSON со значением cost согласно условиям:

      ●	Вычисление стоимости выполняется нарастающем итогом, например требуется определить стоимость за 5 экземпляров продуктов, приобретено ранее 0 (start=0, count=5), стоимость будет 30+25+20+15+10 = 100 рублей.
      
      ●	Приобретено ранее 2 продукта, стоимость запрашивается за 2 экземпляра: start = 2, count=2, по таблице стоимость рассчитывается как 20 + 15 (т.е. за 3 и 4 экземпляр продукта).
      
      ●	Возможно приобрести только партиями по 5 экземпляров, если запрашивается больше, то считается партиями по 5.
   
| Количество приобретенных продуктов | Стоимость |
| --- | --- |
| 1 | 30 |
| 2 | 25 |
| 3 | 20 |
| 4 | 15 |
| 5 | 10 |



Негативные сценарии:

2. Невалидный authToken

      Параметры: authToken=invalid (неверный формат/несуществующий)
      
      Ожидаемый результат: HTTP 401

3. Отсутствующий authToken

      Параметры: без authToken
      
      Ожидаемый результат: HTTP 401

4. Несуществующий productId

      Параметры: валидный authToken, несуществующий productId
      
      Ожидаемый результат: HTTP 404

5. Некорректный тип параметров

      Параметры: count=string (вместо int)
      
      Ожидаемый результат: HTTP 400 или HTTP 500

6. Невалидные значения параметров
   
      Параметры: count=-1 (отрицательное значение)
      
      Ожидаемый результат: HTTP 400 или HTTP 500

8. Невалидные значения параметров
 
      Параметры: start=0.1 (дробное значение)
      
      Ожидаемый результат: HTTP 400 или HTTP 500

10. Запрос без параметров count и start

      Параметры: только authToken и productId
      
      Ожидаемый результат: HTTP 400 или HTTP 500




# Тест-кейсы для REST API GET /products/{productId}/cost

Тест-кейс 1: Запрос комбинацией count, start

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}&count={count}&start={start}
    
    Ожидаемый результат: HTTP 200, JSON {"cost:"{expected}}
    
Таблица тестирования
|*case*|**count**|**start**|**expected**|*Примечание*|
| :- | :- | :- | :- | :- |
|0|0|0|0|Ничего не покупаем|
|1|1|0|30|Первый продукт|
|2|5|0|100|Полная партия|
|3|2|2|35|Позиции на промежутках|
|4|1|4|10|Последний продукт|
|5|6|0|130|Значение на границе (полная партия + первый продукт)|
|6|1|5|30|Значение на границе (первый продукт)|
|7|10|0|200|Две полные партии|
|8|4|3|80|Исключая третий продукт|


Тест-кейс 2: Невалидный authToken

    Предусловия: Существует продукт с ID=321
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken=invalidToken&count=1&start=0
    
    Ожидаемый результат: HTTP 401

Тест-кейс 3: Отсутствующий authToken

    Предусловия: Существует продукт с ID=321
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?count=1&start=0
    
    Ожидаемый результат: HTTP 401

Тест-кейс 4: Несуществующий productId

    Предусловия: Не существует продукта с ID=999999, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/999999/cost?authToken={validToken}&count=1&start=0
    
    Ожидаемый результат: HTTP 404

Тест-кейс 5: Некорректный тип параметра count

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}&count=s&start=0
    
    Ожидаемый результат: HTTP 400 или HTTP 500

Тест-кейс 6: Некорректное значение параметра count

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}&count=-1&start=0
    
    Ожидаемый результат: HTTP 400 или HTTP 500

Тест-кейс 7: Некорректное значение параметра start

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}&count=1&start=0.1
    
    Ожидаемый результат: HTTP 400 или HTTP 500


Тест-кейс 8: Отсутствующие параметры count и start

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}
    
    Ожидаемый результат: HTTP 400 или HTTP 500
