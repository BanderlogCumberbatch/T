# План тестирования REST API GET /products/{productId}/cost

# Функциональное тестирование

Позитивные сценарии:

1. Запрос с разными комбинациями параметров

      Проверить все варианты из условия (count: 1, 2, 3, 4, 5, start: 0, 1, 2, 3, 4)
      
      Ожидаемый результат: HTTP 200, JSON со значением cost согласно условиям:

      ●	Вычисление стоимости выполняется нарастающем итогом, например требуется определить стоимость за 5 экземпляров продуктов, приобретено ранее 0 (start=0, count=5), стоимость будет 30+25+20+15+10 = 100 рублей.
      
      ●	Приобретено ранее 2 продукта, стоимость запрашивается за 2 экземпляра: start = 2, count=2, по таблице стоимость рассчитывается как 20 + 15 (т.е. за 3 и 4 экземпляр продукта).
      
      ●	Возможно приобрести только партиями по 5 экземпляров, если запрашивается больше, то считается партиями по 5.
   
| Количество приобретенных продуктов | Стоимость |
| --- | --- |
| 1 | 30 |
| 2 | 25 |
| 3 | 20 |
| 4 | 2 |
| 5 | 10 |



Негативные сценарии:

2. Невалидный authToken

      Параметры: authToken=invalid (неверный формат/несуществующий)
      
      Ожидаемый результат: HTTP 401

3. Отсутствующий authToken

      Параметры: без authToken
      
      Ожидаемый результат: HTTP 401

4. Несуществующий productId

      Параметры: валидный authToken, несуществующий productId
      
      Ожидаемый результат: HTTP 404

5. Некорректные значения параметров

      Параметры: count=string (вместо int)
      
      Ожидаемый результат: HTTP 400 или HTTP 500

6. Запрос без параметров count и start

      Параметры: только authToken и productId
      
      Ожидаемый результат: HTTP 400 или HTTP 500




# Тест-кейсы для REST API GET /products/{productId}/cost

Тест-кейс 1: Запрос комбинацией count, start

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}&count={count}&start={start}
    
    Ожидаемый результат: HTTP 200, JSON {"cost:"{expected}}
    
Таблица тестирования
|*case*|**count**|**start**|**expected**|
| :- | :- | :- | :- |
|0|1|0|30|
|1|1|1|25|
|2|1|2|20|
|3|1|3|15|
|4|1|4|10|
|5|2|0|55|
|6|2|1|45|
|7|2|2|35|
|8|2|3|25|
|9|2|4|40|
|10|3|0|75|
|11|3|1|60|
|12|3|2|45|
|13|3|3|65|
|14|3|4|65|
|15|4|0|90|
|16|4|1|70|
|17|4|2|75|
|18|4|3|90|
|19|4|4|85|
|20|5|0|100|

Тест-кейс 2: Невалидный authToken

    Предусловия: Существует продукт с ID=321
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken=invalidToken&count=1&start=0
    
    Ожидаемый результат: HTTP 401

Тест-кейс 3: Отсутствующий authToken

    Предусловия: Существует продукт с ID=321
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?count=1&start=0
    
    Ожидаемый результат: HTTP 401

Тест-кейс 4: Несуществующий productId

    Предусловия: Не существует продукта с ID=999999, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/999999/cost?authToken={validToken}&count=1&start=0
    
    Ожидаемый результат: HTTP 404

Тест-кейс 5: Некорректный тип параметра count

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}&count=s&start=0
    
    Ожидаемый результат: HTTP 400 или HTTP 500


Тест-кейс 6: Отсутствующие параметры count и start

    Предусловия: Существует продукт с ID=321, пользователь имеет валидный токен {validToken}
    
    Шаги:
    
    Выполнить GET запрос: /products/321/cost?authToken={validToken}
    
    Ожидаемый результат: HTTP 400 или HTTP 500
